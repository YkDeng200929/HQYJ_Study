## ***QT编程原理***
1. 利用模块
    1. 基本模块: 所有平台都可用的基本功能
    2. 附加模块: 实现特定功能的提供附加价值的模块
    3. 增值模块: 单独发布的提供额外价值的模块
    4. 技术预览模块: 处于开发阶段的测试模块
    5. QT工具
2. 常用模块
    1. `Core`: Qt类库核心, 所有其他模块都依赖此模块
    2. `Gui`: 设计GUI界面的基础类, 包括OpenGL
    3. `Multimedia`: 音视频, 摄像头和广播功能的类
    4. `Multimedia Widgets`: 实现多媒体功能界面组件的类
    5. `Network`: 使网络编程更加简单
    6. `QML`: 用于QML和JavaScript语言的类
    7. `Quick`: 用于构建具有定制界面的动态应用程序的声明框架
    8. `Quick Dialogs`: 用于Qt Quick的系统对话框类型
    9. `Quick Layouts`: 用于Qt Quick界面元素的布局项
    10. `SQL`: 用于数据库操作
    11. `Test`: 对于应用程序和库进行单元测试的类
    12. `Widgets`: 用于构建GUI界面的C++图形组件类
3. 常用的窗口类
    1. `QWidget`所有窗口类的基类
        1. 嵌到其他窗口中: 无边框
        2. 独立显示     : 独立窗口, 有边框
    2. `QDialog`对话框类, **不能嵌到其他窗口中**
---
## ***信号与槽(替代了回调)***
- 用于不同对象间的通信
### 1. 信号
1. 信号和槽的对应关系
    - [一对一, 一对多, 多对一](../../../resource/2.QT/1.%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB.png)
2. **信号的声明**
    - **只能在头文件中声明**, `signals`关键字指出了信号的声明区

            signals:
                void MySignalA();
3. 发送信号
    - 用`emit`关键字 

            void MainWindow::SendSignal()
            {
                emit MySignalA();
            }

### 2. 槽
1. **槽的声明**
    - 槽的声明也只能在头文件中进行, `slot`关键字指出进入了槽函数的声明区, 然后你就可以在此区域定义自己的槽函数, 如果只声明不实现槽函数则会编译报错
### 3. 信号与槽的连接规则
1.  [信号的参数可以比槽多, 反之不可]()
2.  信号与槽的对应关系, 见上面
3. **信号也可以与信号连接**
    - 不过信号与信号连接的发起方参数要比接收方参数多
4. 连接可以通过`disconnect`取消连接
5. [**同一个连接可以绑定多次, 触发一次信号会执行多个槽函数**](../../../resource/2.QT/2.%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%A7%BD%E7%9A%84%E8%BF%9E%E6%8E%A5%E8%A7%84%E5%88%992.png)
    - 这等于设计bug
### 4. 信号与槽的连接方式
1. 直连`DirectConnection`
    - 信号发送的时候直接被调用, **槽函数运行于信号发送者所在线程**
2. 排队`QueuedConnection`
    - 信号发送时**槽函数不会立即被调用**, 他会等到接收者执行完当前任务(函数), **进入事件循环时槽函数才被调用**
3. 自动`AutoConnection`
    - ***默认的连接方式***
    - 情况:
        1. 接收者和发送者在同一个线程: 自动使用`DirectConnection`
        2. 不在同一线程: 自动使用`QueuedConnection`
4. 阻塞排队`BlockingQueuedConnection`
    - 发送信号后**发送者线程会阻塞**, 直到连接的槽函数执行完才会解除阻塞
    - **注意:**接收者和发送者绝对不能在同一个线程, 否则程序会[死锁](./1%E5%90%84%E9%83%A8%E5%88%86%E7%9A%84%E4%B8%80%E4%BA%9B%E9%87%8D%E7%82%B9.md)
5. 唯一连接`UniqueConnection`
    - 可以避免重复连接
    - 通过按位与`|`来结合以上四种情况使用
 
### **关键点: 信号发出时`connect`连接的槽函数会被调用**
---
## ***元对象系统***
### 功能
1. 提供对象间信号与槽的通信机制
2. 是标准C++的扩展, 能让Qt更好的支持GUI图形界面编程
### 组成
1. QObject
2. 类声明私有段中的`Q_OBJECT`宏
3. [元对象编译器(moc)**只又类直接或间接继承QOBJECT时才会触发**](../../../resource/2.QT/3.moc%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.png)
    1. 编译过程中查看头文件里是否有`Q_OBJECT`宏
    2. 有的话再找Qt关键字
    3. 以上获取到的内容称为**元数据**
    4. moc会把元数据编译出来, 生成`.cpp`文件
    5. 在编译阶段把其和源文件组合起来
---
## ***QT内存回收机制***
- 如果想要在 Qt 中实现内存的自动回收，需要满足以下两个条件:
    1. 创建的对象必须是 QObject 类的子类 (间接子类也可以)
        - QObject 类是没有父类的，Qt 中有很大一部分类都是从这个类派生出去的
        - Qt 中使用频率很高的窗口类和控件都是 QObject 的直接或间接的子类其他的类可以自己查阅 Qt 帮助文档
    2. 创建出的类对象，必须要指定其父对象是谁，一般情况下有两种操作方式:

                // 方式1: 通过构造函数
                // parent: 当前窗口的父对象, 找构造函数中的 parent 参数即可
                QWidget::QWidget(QWidget *parent = Q_NULLPTR, Qt::WindowFlags f = Qt::WindowFlags());
                QTimer::QTimer(QObject *parent = nullptr);

                // 方式2: 通过setParent()方法
                // 假设这个控件没有在构造的时候指定符对象, 可以调用QWidget的api指定父窗口对象
                void QWidget::setParent(QWidget *parent);
                void QObject::setParent(QObject *parent);
---
## ***CSS样式***
1. 类选择器: 只匹配指定的类,**不匹配子类**

        基本语法格式：.类名{ 
                    属性1: 属性值1;
                    属性2:属性值2;
                    }
2. 类型选择器: 匹配指定的类和其子类

        基本语法格式：类名{ 
                    属性1: 属性值1;
                    属性2:属性值2;
                    }
2. id选择器: id是控件的对象名

        基本语法格式：#id名{
                    属性1:属性值1;
                    属性2:属性值2;
                    }
3. 伪状态: 当控件触发某种行为时切换到对应样式(**不能单独存在, 只能配合选择器使用**)

        基本语法格式: <选择器> : <伪状态>{
                    属性: 属性值;
                    }
4. 更多样式和案例: 帮助手册中搜索`Qt Style Sheet`
---
## ***其他注意点***
1. 删除设置错误的资源文件夹
    1. 当你没在`image.qrc`中添加资源文件而是基于resource文件夹添加的资源文件, 这时会生成一个多余的文件夹, 而且这个文件夹是没有删除选项的
    2. **解决方式**:进入`.pro`文件, 删除`DISTFILES`及其包含的所有内容

        RESOURCES += \
            image.qrc
        DISTFILES += \    // 删除
            Image/*.png   // 删除
2. 若打开别人写的项目, 会出现**构建目录和本项目目录不一致**的错误, 此时从`工具->选项->C++`中选择编译目录为本目录, 并且删掉项目文件夹中的.user文件即可
3. 若QT界面过大, 可以设置系统环境变量, 在系统变量里添加变量名为`QT_SCALE_FACTOR`,值设置为1
4. 调用规则: 构造函数顺序调用, 析构函数逆序调用
5. `explicit` 不能隐式转换 w = x 不允许 w() 只允许
6. 自动连接槽：窗口事件?
7. **在用网络通信功能时一定要在`.pro`中添加`network`模块**