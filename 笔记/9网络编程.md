# 网络编程

## 1. 概念
### 1.1 计算机网络的组成
1. 硬件
    - 主机, 光纤, 交换设备(路由器, 交换机)
2. 软件
    - 操作系统, 邮件收发软件, FTP程序
3. 协议
    - http, tcp, udp, ip...
### 1.2 计算机网络按分布范围分类
1. 广域网(WAN)
2. 局域网(LAN)
3. 个人区域网(PAN)personal area network
### 1.3 名词解释
1. mac地址: 网卡的物理地址
2. ip地址: 
    - 在网络中识别机器的逻辑地址, 一定要与具体的主机进行映射(关联)
    - 192.168.10.102 点分十进制字符串
    - 192.168.10: 网络号
    - 102: 主机号
    - 子网掩码(用于屏蔽主机号)
        1. 用于获取ip地址中的网络号
        2. 255.255.255.0
        3. ip & 子网掩码 = 网络号
        4. ip & ~子网掩码 = 主机号
3. 端口号
    1. 标识使用网络的进程, 决定数据到底发送给哪个进程
    2. 端口号一般为16位, 范围(0 ~ 65535)**0 ~ 1023已经永久分配给特定的进程**
4. 网关
    - **一般用路由器作为网关**
5. DNS服务器
    - 将域名解析为ip地址
6. DHCP服务器
    - 自动分配ip地址
## 2. 网络通信原理
### 2.1 硬件
#### 2.1.1 交换机
1. 说明: 他是一种网络硬件, 通过报文交换接收和转发数据到目标设备, 它能够在计算机网络上连接不同的设备, 
2. **它工作在数据链路层**
3. 工作过程
    1. A主机封装好网络数据包(包含地址信息与数据), 将数据发送给交换机
    2. 交换机解析目标mac地址信息
    3. 交换机查mac地址与端口映射表, 找到目标mac地址所对应的端口
    4. 交换机通过目标端口将数据转发出去, 到达B主机
    5. ARP协议: 根据ip地址找到对应的mac地址
    6. RARP协议: 根据mac地址找到ip地址

                         交换机
                    ------------------
                    |                |
                    | 表             |
                    | macA         1 |         路由器
                    | macB         3 |        |------| (wlan)
                    | mac gateway 5  |        |      |<-------> |----|----->电话线
                    -----------------         |------|          |----|
                    1  2   3   4  5<------------>|(lan)         调制解调器
                    |      |
                A主机      |
                         B主机
                                            ------------------------------------- 
                                            |                   [家人1]          |
                                            |                      |            |
                         [路由器] <--------->|[家路由器]<---->(交换机)<-->[家人2] |
                            |               -------------------------------------     
                            |                              ----------------------
                            |---------->[路由器]<--------->[家路由器]<--->[用户]  |
                                                          -----------------------
#### 2.1.2 路由器
1. 说明: 一种电讯网络设备, 提供路由与传送两种重要机制
    1. 可以决定数据包由来源端所经过的路径, (host到host之间的传输路径), 这个过程称为路由
    2. 将路由器输入端的数据包移送至适当路由器输出端(在路由器内部进行), 称为传送
2. **与交换机区别**(个人感觉路由器用于远距离数据传输, 交换机用于局域网数据传输)
    1. 路由器在网络层[(第三层)](#222-层次结构), 而交换机(网桥)在数据链路层工作(第二层)
    2. 路由器能在多条路径中选择最佳路径, 在发送数据包时, 路由表会被一同发送, 该表存储了前往某一网络的最佳路径
    3. 路由器可连接超过两个以上的不同网络, 而交换机只能连接两个
    4. 路由器具有ip分享器功能, ，主要是让多台设备用同一条ADSL/光纤宽带线路来上网，功能包括共享IP，宽带管理，自动分配IP等等
3. nat: 网络地址转换


### 2.2 软件
#### 2.2.1 协议
#### 2.2.2 层次结构
<table>
    <tr>
        <td>OSI参考模型</td>
        <td>TCP/IP五层模型</td>
        <td>实际应用</td>
    </tr>
    <tr>
        <td>应用层</td>
        <td rowspan="3">应用层</td>
        <td rowspan="3">应用层</td>
    </tr>
    <tr>
        <td>表示层</td>
    </tr>
    <tr>
        <td>会话层</td>
    </tr>
    <tr>
        <td>传输层</td>
        <td>传输层</td>
        <td>传输层</td>
    </tr>
    <tr>
        <td>网络层</td>
        <td>网络层</td>
        <td>网络层</td>
    </tr>
    <tr>
        <td>数据链路层</td>
        <td>数据链路层</td>
        <td>数据链路层</td>
    </tr>
    <tr>
        <td>物理层</td>
        <td>物理层</td>
    </tr>
</table>

#### 2.2.3 数据收发过程

## 2. [函数](../Class/10网络编程/1day自习/1socket/1serve.c)
### 2.1 创建套接字
- `socket`
### 2.2 绑定ip信息
- `bind`
### 2.3 监听请求
- `listen`
### 2.4 接受请求
- `accept`
### 2.5 连接
- `connect`